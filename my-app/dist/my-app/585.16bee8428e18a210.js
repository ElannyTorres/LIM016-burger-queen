"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[585],{3585:(R,g,a)=>{a.r(g),a.d(g,{ChefviewModule:()=>I});var l=a(9808),c=a(7554),e=a(5e3),u=a(9623),O=a(3071);function C(r,n){if(1&r&&(e.TgZ(0,"ul"),e.TgZ(1,"li"),e._uU(2),e.qZA(),e.TgZ(3,"li"),e._uU(4),e.qZA(),e.qZA()),2&r){const t=n.$implicit;e.xp6(2),e.Oqu(t.monthDateYear),e.xp6(2),e.Oqu(t.hourMinutes)}}function _(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"select",11),e.NdJ("change",function(s){return e.CHM(t),e.oxw().orderStatus(s)}),e.TgZ(1,"option",12),e._uU(2,"New"),e.qZA(),e.TgZ(3,"option",13),e._uU(4,"Accepted"),e.qZA(),e.TgZ(5,"option",14),e._uU(6,"Ready"),e.qZA(),e.qZA()}if(2&r){const t=e.oxw();e.s9C("id",t.orders.id),e.s9C("value",t.orders.data.status)}}function v(r,n){if(1&r&&(e.TgZ(0,"p",15),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.s9C("id",t.orders.id),e.xp6(1),e.Oqu(t.orders.data.status)}}function y(r,n){if(1&r&&(e.TgZ(0,"p",15),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.s9C("id",t.orders.id),e.xp6(1),e.Oqu(t.orders.data.status)}}function Z(r,n){if(1&r&&(e.TgZ(0,"tbody"),e.TgZ(1,"tr"),e.TgZ(2,"th"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.qZA(),e.qZA()),2&r){const t=n.$implicit;e.xp6(3),e.Oqu(t.amount),e.xp6(2),e.Oqu(t.description)}}function T(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).delivered()}),e._uU(1,"Delivered"),e.qZA()}}function M(r,n){if(1&r&&(e.TgZ(0,"div",16),e.YNc(1,T,2,0,"button",17),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","Ready"==t.orders.data.status)}}let p=(()=>{class r{constructor(t,o,s){this.userService=t,this.firestoreService=o,this.router=s,this.roleChef=!1,this.roleWaiter=!1,this.time="00:00",this.runningTime=0}ngOnInit(){this.dataUser=this.userService.getUserLoggedIn(),this.roleWaiter="waiter"==this.dataUser.role,this.roleChef="chef"==this.dataUser.role,1==this.roleChef?setTimeout(()=>{this.showTime()},1):1==this.roleWaiter&&setTimeout(()=>{this.background()},1)}showTime(){const t=document.getElementById(this.orders.id);console.log("itemOrderStatus",t);let o=document.getElementById(this.orders.id).value;null!==t&&("Accepted"==o?(this.startTime=this.orders.data.startTime,this.start(this.startTime),t.style.backgroundColor="#ffbbae"):"Ready"==o?(t.style.backgroundColor="#cddfa0",console.log("este select est\xe1 listo"),console.log(this.orders.data.readyTime),this.time=this.orders.data.readyTime):"Delivered"==this.orders.data.status&&(t.style.backgroundColor="#c5c5c5",console.log("la orden ha sido entregada"),console.log(this.orders.data.readyTime),this.time=this.orders.data.readyTime))}background(){const t=document.getElementById(this.orders.id);document.getElementById(this.orders.id),null!==t&&null!=t&&("Accepted"==t.innerHTML?t.style.backgroundColor="#ffbbae":"Ready"==t.innerHTML?t.style.backgroundColor="#cddfa0":"Delivered"==t.innerHTML&&(t.style.backgroundColor="#c5c5c5",this.time=this.orders.data.readyTime))}orderStatus(t){console.log(t.target.value),"Accepted"==t.target.value?(this.startTime=Date.now(),this.firestoreService.updateStatus(this.orders.id,t.target.value,this.startTime)):"Ready"==t.target.value&&(this.stop(),this.firestoreService.updateStatus(this.orders.id,t.target.value,this.startTime),this.firestoreService.sendReadyTime(this.orders.id,this.time))}start(t){this.timeInterval=setInterval(()=>{this.runningTime=Date.now()-t,this.time=this.calculateTime(this.runningTime)},1e3)}calculateTime(t){const o=Math.floor(t/1e3),s=Math.floor(o/60),i=Math.floor(s/60),d=(o%60).toString().padStart(2,"0"),J=(60&s).toString().padStart(2,"0");return`${i.toString().padStart(2,"0")}:${J}:${d}`}stop(){clearInterval(this.timeInterval)}delivered(){this.firestoreService.updateStatusDelivered(this.orders.id,"Delivered")}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(O.K),e.Y36(u.C),e.Y36(c.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-card-order"]],inputs:{orders:"orders"},decls:26,vars:9,consts:[[1,"order","card","fontBaloo"],[1,"info"],[1,"client-name"],[1,"client-table"],[1,"time"],[4,"ngFor","ngForOf"],[1,"card-body"],["class","form-select form-select-sm",3,"id","value","change",4,"ngIf"],[3,"id",4,"ngIf"],[1,"table","table-striped","table-sm"],["class","containerDelivered",4,"ngIf"],[1,"form-select","form-select-sm",3,"id","value","change"],["value","New"],["value","Accepted"],["value","Ready"],[3,"id"],[1,"containerDelivered"],["class","btnDelivered",3,"click",4,"ngIf"],[1,"btnDelivered",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"p"),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",4),e.YNc(9,C,5,2,"ul",5),e.TgZ(10,"ul"),e.TgZ(11,"li"),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.YNc(14,_,7,2,"select",7),e.YNc(15,v,2,2,"p",8),e.YNc(16,y,2,2,"p",8),e.TgZ(17,"table",9),e.TgZ(18,"thead"),e.TgZ(19,"tr"),e.TgZ(20,"th"),e._uU(21,"Cant"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Detail"),e.qZA(),e.qZA(),e.qZA(),e.YNc(24,Z,6,2,"tbody",5),e.qZA(),e.YNc(25,M,2,1,"div",10),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.hij("Client: ",o.orders.data.clientName,""),e.xp6(3),e.hij("Table: ",o.orders.data.table,""),e.xp6(2),e.Q6J("ngForOf",o.orders.data.date),e.xp6(3),e.hij("Time: ","Ready"==o.orders.data.status?o.orders.data.readyTime:o.time,""),e.xp6(2),e.Q6J("ngIf",o.roleChef&&"Delivered"!==o.orders.data.status),e.xp6(1),e.Q6J("ngIf",o.roleWaiter&&"Delivered"!==o.orders.data.status),e.xp6(1),e.Q6J("ngIf","Delivered"==o.orders.data.status),e.xp6(8),e.Q6J("ngForOf",o.orders.data.products),e.xp6(1),e.Q6J("ngIf",o.roleWaiter))},directives:[l.sg,l.O5],styles:['@import"https://fonts.googleapis.com/css2?family=Baloo+Paaji+2&display=swap";*[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px}*[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.order[_ngcontent-%COMP%]{margin:.5rem;width:20rem;border-radius:10px}.order[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding-top:.5rem;height:2.5rem;background-color:#94d154;color:#fff;display:flex;justify-content:space-around;font-family:"Baloo Paaji 2",cursive}.order[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:.9rem;text-align:center;display:flex;flex-direction:row;justify-content:space-between;border-bottom:1px solid grey;padding-top:.5rem;align-items:flex-end}.order[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;margin-bottom:.5rem;padding-right:1rem}.order[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:center}.order[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{border-radius:0}.order[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{border-bottom:1px solid grey}.order[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-bottom:.5rem}.order[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{text-align:center}.order[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;justify-content:center}.order[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .order[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:.9rem;text-align:center;border-radius:0}.containerDelivered[_ngcontent-%COMP%]{display:flex;justify-content:center}.containerDelivered[_ngcontent-%COMP%]   .btnDelivered[_ngcontent-%COMP%]{background-color:var(--GreenLight);border:none;padding:.4rem;color:var(--White);border-radius:.5rem;margin:.3rem}']}),r})();function b(r,n){1&r&&e._UZ(0,"app-card-order",2),2&r&&e.Q6J("orders",n.$implicit)}let x=(()=>{class r{constructor(t){this.firestoreService=t,this.listOrders=[]}ngOnInit(){this.getOrder()}getOrder(){this.firestoreService.getOrder().subscribe(t=>{this.listOrders=[],t.forEach(o=>{this.listOrders.push({id:o.payload.doc.id,data:o.payload.doc.data()})}),this.sortOrders(this.listOrders)})}sortOrders(t){t.sort((o,s)=>{const i=o.data.date[0].monthDateYear.split("/").reverse().join("-"),d=s.data.date[0].monthDateYear.split("/").reverse().join("-");return i==d?s.data.date[0].hourMinutes.localeCompare(o.data.date[0].hourMinutes):+new Date(d)-+new Date(i)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.C))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-all-orders"]],decls:2,vars:1,consts:[[1,"col-md-12","justify-content-between","d-flex","flex-wrap","mx-auto"],["class","m-sm-3 mx-auto",3,"orders",4,"ngFor","ngForOf"],[1,"m-sm-3","mx-auto",3,"orders"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,b,1,1,"app-card-order",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.listOrders))},directives:[l.sg,p],styles:[""]}),r})(),f=(()=>{class r{transform(t,o){let s=[];return""!=o&&(s=t.filter(i=>i.data.status==o)),s}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275pipe=e.Yjl({name:"pipeOrderStatus",type:r,pure:!0}),r})();function A(r,n){1&r&&e._UZ(0,"app-card-order",2),2&r&&e.Q6J("orders",n.$implicit)}let P=(()=>{class r{constructor(t){this.firestoreService=t,this.listOrders=[]}ngOnInit(){this.getOrder()}getOrder(){this.firestoreService.getOrder().subscribe(t=>{this.listOrders=[],t.forEach(o=>{this.listOrders.push({id:o.payload.doc.id,data:o.payload.doc.data()})}),this.sortOrders(this.listOrders)})}sortOrders(t){t.sort((o,s)=>{const i=o.data.date[0].monthDateYear.split("/").reverse().join("-"),d=s.data.date[0].monthDateYear.split("/").reverse().join("-");return i==d?s.data.date[0].hourMinutes.localeCompare(o.data.date[0].hourMinutes):+new Date(d)-+new Date(i)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.C))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-order-delivered"]],decls:3,vars:4,consts:[[1,"col-md-12","justify-content-between","d-flex","flex-wrap","mx-auto"],["class","m-sm-3 mx-auto",3,"orders",4,"ngFor","ngForOf"],[1,"m-sm-3","mx-auto",3,"orders"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,A,1,1,"app-card-order",1),e.ALo(2,"pipeOrderStatus"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,o.listOrders,"Delivered")))},directives:[l.sg,p],pipes:[f],styles:[""]}),r})();function w(r,n){1&r&&e._UZ(0,"app-card-order",2),2&r&&e.Q6J("orders",n.$implicit)}let D=(()=>{class r{constructor(t){this.firestoreService=t,this.listOrders=[]}ngOnInit(){this.getOrder()}getOrder(){this.firestoreService.getOrder().subscribe(t=>{this.listOrders=[],t.forEach(o=>{this.listOrders.push({id:o.payload.doc.id,data:o.payload.doc.data()})}),this.sortOrders(this.listOrders)})}sortOrders(t){t.sort((o,s)=>{const i=o.data.date[0].monthDateYear.split("/").reverse().join("-"),d=s.data.date[0].monthDateYear.split("/").reverse().join("-");return i==d?s.data.date[0].hourMinutes.localeCompare(o.data.date[0].hourMinutes):+new Date(d)-+new Date(i)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.C))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-order-ready"]],decls:3,vars:4,consts:[[1,"col-md-12","justify-content-between","d-flex","flex-wrap","mx-auto"],["class","m-sm-3 mx-auto",3,"orders",4,"ngFor","ngForOf"],[1,"m-sm-3","mx-auto",3,"orders"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,w,1,1,"app-card-order",1),e.ALo(2,"pipeOrderStatus"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",e.xi3(2,1,o.listOrders,"Ready")))},directives:[l.sg,p],pipes:[f],styles:[""]}),r})();var m=a(801),h=a(9444);const S=function(){return["allOrders"]},q=function(){return["ready"]},U=function(){return["delivered"]},Y=[{path:"",component:(()=>{class r{constructor(t){this.firestoreService=t,this.listOrders=[],this.listOrdersDelivered=[],this.listOrdersReady=[],this.roleChef=!1,this.roleWaiter=!1,this.orders=[],this.time="00:00:00",this.runningTime=0,this.id="",this.faAllOrders=m.RYF,this.faOrdersReady=m.hnx,this.faOrdersDelivered=m.f8k}ngOnInit(){this.getOrder()}getOrder(){this.firestoreService.getOrder().subscribe(t=>{this.listOrders=[],t.forEach(o=>{this.listOrders.push({id:o.payload.doc.id,data:o.payload.doc.data()})}),this.sortOrders(this.listOrders)})}sortOrders(t){t.sort((o,s)=>{const i=o.data.date[0].monthDateYear.split("/").reverse().join("-"),d=s.data.date[0].monthDateYear.split("/").reverse().join("-");return i==d?s.data.date[0].hourMinutes.localeCompare(o.data.date[0].hourMinutes):+new Date(d)-+new Date(i)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.C))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-order-status"]],decls:20,vars:9,consts:[[1,"order-container"],[1,"cardOptions"],[1,"list-group","optionsOrderStatusContainer"],[1,"list-group-item"],[3,"routerLink"],[3,"icon"],[1,"cardsOrders"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"ul",2),e.TgZ(3,"li",3),e.TgZ(4,"button",4),e._UZ(5,"fa-icon",5),e.TgZ(6,"p"),e._uU(7,"All Orders"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"li",3),e.TgZ(9,"button",4),e._UZ(10,"fa-icon",5),e.TgZ(11,"p"),e._uU(12,"Orders Ready"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"li",3),e.TgZ(14,"button",4),e._UZ(15,"fa-icon",5),e.TgZ(16,"p"),e._uU(17,"Delivered"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",6),e._UZ(19,"router-outlet"),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("routerLink",e.DdM(6,S)),e.xp6(1),e.Q6J("icon",o.faAllOrders),e.xp6(4),e.Q6J("routerLink",e.DdM(7,q)),e.xp6(1),e.Q6J("icon",o.faOrdersReady),e.xp6(4),e.Q6J("routerLink",e.DdM(8,U)),e.xp6(1),e.Q6J("icon",o.faOrdersDelivered))},directives:[c.rH,h.BN,c.lC],styles:[".order-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:15rem 1fr;align-items:stretch;margin:1rem;flex-wrap:wrap}.cardOptions[_ngcontent-%COMP%]{margin:1.5rem;grid-column:1/2}.cardsOrders[_ngcontent-%COMP%]{grid-column:2/3;height:30rem;overflow:auto}.cardsOrders[_ngcontent-%COMP%]::-webkit-scrollbar{width:.5rem}.cardsOrders[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--Salmon);border-radius:.5rem;border-right:.5rem solid var(--Salmon);height:10%}.optionsOrderStatusContainer[_ngcontent-%COMP%]{display:flex;flex-direction:column}button[_ngcontent-%COMP%]{border:none;background:none;color:var(--White)}.list-group-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background-color:var(--Salmon);padding:0rem}fa-icon[_ngcontent-%COMP%]{color:var(--White);font-size:2rem}button[_ngcontent-%COMP%]{padding:2rem 3rem}@media (min-width: 1025px){fa-icon[_ngcontent-%COMP%]{color:var(--White);font-size:3.5rem}.cardsOrders[_ngcontent-%COMP%]{height:40rem}}"]}),r})(),children:[{path:"ready",component:D},{path:"allOrders",component:x},{path:"delivered",component:P}]}];let F=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[c.Bz.forChild(Y)],c.Bz]}),r})();var j=a(4466);let I=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[l.ez,F,j.m,h.uH]]}),r})()}}]);